<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset=utf-8 />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Mobile viewing enhancement -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <!-- Description should be roughly 155 characters, no double quotes, use keywords -->
    <meta name="description" content="Livetutor and Firebase" />
    <!-- Format as Primary Keyword - Secondary Keyword | Brand Name, keep under 55 characters -->
    <title>Livetutor SJSU</title>
    <!-- Minimize the number of CSS files for performance -->
    <link rel="shortcut icon" href="Picture1.png">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,700,100,300,700italic,500,500italic,400italic,300italic,100italic|Roboto+Condensed:300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-amber.min.css" />
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script src = "script.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.4.1/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyAw7K-ok0pec6dYkqropUCYlOhQBfF4VWo",
    authDomain: "myproject-80d6f.firebaseapp.com",
    databaseURL: "https://myproject-80d6f.firebaseio.com",
    storageBucket: "myproject-80d6f.appspot.com",
    messagingSenderId: "334115835207"
  };
  firebase.initializeApp(config);
    </script>  
    <script type="text/javascript">
    
        
    function GetSignIn() {
        if (firebase.auth().currentUser) {
        // START signout
        firebase.auth().signOut();
        document.getElementById('username-input').disabled=true;
        document.getElementById('password-input').disabled=true;
          
        // END signout
      } else {
        var email = document.getElementById('username-input').value;
        var password = document.getElementById('password-input').value;
        if (email.length < 4) {
          alert('Please enter an email address.');
          return;
        }
        if (password.length < 4) {
          alert('Please enter a password.');
          return;
        }
        // Sign in with email and pass.
        // START authwithemail
        firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
          // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          // [START_EXCLUDE]
          if (errorCode === 'auth/wrong-password') {
            alert('Wrong password.');
          } else {
            alert(errorMessage);
          }
          console.log(error);
          // END_EXCLUDE
        });
        // END authwithemail
      }
    loadAccountChip(msg);  
    }
    function GetSignUp() {
      var email = document.getElementById('email').value;
      var password = document.getElementById('registration-input-password').value;
      var displayName = document.getElementById('display-name').value;
        
      if (email.length < 4) {
        alert('Enter a valid email address');
        return;
      }
      if (password.length < 4) {
        alert('Enter a password.');
        return;
      }
      // Sign up with email and pass and store last name and first to database
      firebase.auth().createUserWithEmailAndPassword(email, password).then(function(result) {
      firebase.database().ref('/users/' + result.uid).set({
    
    firstName: displayName
      });
    alert('You successfully created your account!');
      sendEmailVerification();
      document.getElementById('register-card').style.display = "none";    
      });
      // END createwithemail
    }
    /**
     * Sends an email verification to the user.
     */
    function sendEmailVerification() {
      // [START sendemailverification]
      firebase.auth().currentUser.sendEmailVerification().then(function() {
        // Email Verification sent!
        // START_EXCLUDE
        alert('check your email to verify your account!');
        // END_EXCLUDE
      });
      // END sendemailverification
    }  
     function loadAccountChip(msg){
    accountButton.innerHTML = '';

    //MSG SHORT CIRCUIT PROVIDES MEMBER ACCESS UPON EMAIL VERIFIED PAGE LOAD
    if(msg){
      if(displayName){
        signInButton.style.display = "none";
        accountButton.style.display = "inline";        
      } else {
        signInButton.style.display = "inline";
        accountButton.style.display = "inline";         
      }
      
    } else {
      if(!uid || !displayName){
        signInButton.style.display = "inline";
        accountButton.style.display = "none";
      } else {
        signInButton.style.display = "none";
        accountButton.style.display = "inline";            
      }      
    }
      
    
    accountButton.innerHTML = '<span> ' + displayName + ' </span><ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="account-menu-button"><li class="mdl-menu__item" id="account-settings-button">Account Settings</li><li class="mdl-menu__item" id="sign-out-button">Logout</li></ul>';
    
    
    }
  
  // SIGN OUT
  function signout (){
    auth.signOut().then(function() {
      accountButton.style.display = "none";
      signInButton.style.display = "inline";
      toast('Signed Out');
      redirect('login');
    }, function(error) {
      toast('Sign out Failed');
    });       
  }
   
        function check(){
        var user = auth.currentUser;
        alert('My name:' + user.email);
            
            
        }
        
    
    function Signin() {
    document.getElementById('login-card').style.display = "inline";   
    document.getElementById('register-card').style.display = "none";    
    document.getElementById('logout-card').style.display = "none";
        
    }  
    
    function Signup() {
    document.getElementById('login-card').style.display = "none";    
    document.getElementById('register-card').style.display = "inline";    
    }
    
    function Signout() {
    document.getElementById('login-card').style.display = "none";    
    document.getElementById('register-card').style.display = "none";
    document.getElementById('logout-card').style.display = "inline";
        
    }   
        
        
    function initApp() {
      document.getElementById('login-button').addEventListener('click', GetSignIn, false);
      document.getElementById('sign-in-button').addEventListener('click', Signin, false);
      document.getElementById('register-button').addEventListener('click', check, false);
      document.getElementById('help-button').addEventListener('click', Signout, false);
      document.getElementById('submit-button').addEventListener('click', GetSignUp, false);
    }
    window.onload = function() {
      initApp();
    };
    
    </script>
    </head>
<body>
    <div class="demo-layout-transparent mdl-layout mdl-js-layout">
        
        <!-- Header -->
        <header class="mdl-layout__header mdl-layout__header--transparent ">
            <div class="mdl-layout__header-row mdl-color-text--grey-700">
                <span class="mdl-layout-title">
                    <a href="/"><img src="Picture1.png" alt="logo" height="70"></a>
                </span>
                <!-- Add spacer, to align navigation to the right -->
                <div class="mdl-layout-spacer"></div>
                <!-- Navigation -->
                <nav class="mdl-navigation">
                    <div class="mdl-navigation__link">
                        <form id="search" method="get" action="http://www.google.com">
		                   <input type="text" id="tfq" class="tftextinput2" name="q" size="80" maxlength="100" Placeholder="Search our website"><input type="submit" value="Search" class="tfbutton2">
		                </form>
		              <div class="clear"></div>
                    </div>
                    <a class="mdl-navigation__link" href="javascript:void(0)" id="sign-in-button">
                        <i class="material-icons">account_circle</i> <span id="account">Sign In</span>
                    </a>
                    <a class="mdl-navigation__link" href="javascript:void(0)" id="account-menu-button">
                    </a>
                    <a class="mdl-navigation__link" href="javascript:void(0)" id="help-button">
                        <i class="material-icons">child_care</i> <span id="help">Sign up</span>
                    </a>
                </nav>
            </div>
        </header>
        
        <!--Main Page -->
        <main class="mdl-layout__content page-content">
            
            <!--Card Section -->
            <section class="mdl-grid">
                
                <!-- Center Card -->
                <div class="mdl-layout-spacer"></div>
                  
                <!-- Login Card -->
                <div class="login-card mdl-card mdl-shadow--2dp mdl-cell" id="login-card">
                    <div class="mdl-card__title">
                        <h1 class="mdl-card__title-text mdl-color-text--white">Login</h1>
                    </div>
                    <div class="mdl-card__supporting-text mdl-typography--headline text-center">
                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect oauth-login-button" style ="background-color:azure;" id="facebook-button">
                                <img src="facebox.png" alt="facebook icon" class="social-icon"> <span class="opacity4">facebook</span>
                              </button>
                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect oauth-login-button" style ="background-color:azure;" id="github-button">
                                <img src="images.png" alt="github icon" class="social-icon"> <span class="opacity4">github</span>
                              </button>
                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect oauth-login-button" style ="background-color:azure;" id="google-button">
                                <img src="images%20(1).png" alt="google icon" class="social-icon"> <span class="opacity4">google</span>
                              </button>
                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect oauth-login-button" style ="background-color:azure;" id="twitter-button">
                                <img src="images.jpeg" alt="twitter icon" class="social-icon"> <span class="opacity4">twitter</span>
                              </button>
                        <div class="text-center">- or -</div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input mdl-color-text--orange-500" type="text" id="username-input">
                            <label class="mdl-textfield__label" for="username-input">Username</label>
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" id="password-input-mdl-textfield">
                            <input class="mdl-textfield__input mdl-color-text--orange-500" type="password" id="password-input">
                            <label class="mdl-textfield__label" for="password-input">Password</label>
                        </div>
                    </div>
                    <div class="mdl-card__actions mdl-card--border intro-card-actions">
                        <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" id="register-button">
                                Sign Up
                              </a>
                        <div class="mdl-layout-spacer"></div>
                        <button class="mdl-button mdl-button--colored" id="login-button" >Login</button>
                    </div>
                </div>
                
                <!-- Register Card -->
                <div class="login-card mdl-card mdl-shadow--2dp mdl-cell" id="register-card">
                    <div class="mdl-card__title">
                        <h1 class="mdl-card__title-text mdl-color-text--white">Register</h1>
                    </div>
                    <div class="mdl-card__supporting-text mdl-typography--headline text-center" id="register-supporting-text">
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input mdl-color-text--orange-500" type="email" id="email">
                            <label class="mdl-textfield__label" for="username">Email</label>
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input mdl-color-text--orange-500" type="text" id="display-name">
                            <label class="mdl-textfield__label" for="display-name">Display Name</label>
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input mdl-color-text--orange-500" type="password" id="registration-input-password">
                            <label class="mdl-textfield__label" for="registration-input-password">Password</label>
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" id="registration-input-password2-mdl-textfield">
                            <input class="mdl-textfield__input mdl-color-text--orange-500" type="password" id="registration-input-password2">
                            <label class="mdl-textfield__label" for="registration-input-password2">Re-Enter Password</label>
                        </div>
                    </div>
                    <div class="mdl-card__actions mdl-card--border intro-card-actions">
                        <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" id="back-button">
                                Back
                              </a>
                        <div class="mdl-layout-spacer"></div>
                        <button class="mdl-button mdl-button--colored" id="submit-button" >Submit</button>
                    </div>
                </div>
                
                <!-- Logout Card -->
                <div class="login-card mdl-card mdl-shadow--2dp mdl-cell"  id="logout-card">
                    <div class="mdl-card__title">
                      <h1 class="mdl-card__title-text mdl-color-text--white">Signed In</h1>
                    </div>
                    <div class="mdl-card__supporting-text mdl-typography--headline text-center" id="register-supporting-text">
                      <h6 class="text-left">You are now signed in.  To sign out or update your account click on your display name in the top right corner.</h6>
                    </div>
                    <div class="mdl-card__actions mdl-card--border intro-card-actions">
                        <div class="mdl-layout-spacer"></div>
                        <a class="mdl-button mdl-button--colored" href="/">home</a>
                    </div>
                </div>                       
                <!-- Center Card -->
                <div class="mdl-layout-spacer"></div>
                
            <!--/Card Section -->
            
            </section>
            
        </main>
            
        <!--Main Page Footer Section -->
        <footer class="mdl-mini-footer">
            <div class="mdl-mini-footer__left-section">
                <div class="mdl-logo">
                    About Us
                </div>
                <ul class="mdl-mini-footer__link-list">
                    <li><a href="https://firebase.google.com/docs/auth/">Firebase Authentication</a></li>
                    <li><a href="https://firebase.google.com/docs/reference/js/index-all">Firebase Web Reference Index</a></li>
                </ul>
            </div>
        </footer>
        
    </div>
    
    <script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>
 </body>

</html>
